<div class="card bg-card-bg rounded-custom shadow-custom p-6 mb-8 transition-all duration-300 hover:shadow-custom-hover hover:-translate-y-1">
  <div class="card-header flex items-center mb-5 pb-3 border-b border-gray-light">
    <div class="card-icon text-primary w-6 h-6 flex items-center justify-center">
      <i class="fas fa-link"></i>
    </div>
    <h2 class="card-title text-lg font-semibold ml-2.5">Tải video từ link M3U8</h2>
  </div>

  <div class="input-group flex flex-col md:flex-row">
    <div class="input-wrap relative flex-1">
      <div class="input-icon absolute left-4 top-1/2 -translate-y-1/2 text-gray">
        <i class="fas fa-link"></i>
      </div>
      <input type="text" id="videoUrl" placeholder="Nhập link .m3u8 hoặc http"
        class="w-full p-4 pl-11 rounded-custom border-2 border-gray-light text-base transition-all duration-300 focus:border-primary focus:ring-2 focus:ring-primary/15 outline-none placeholder-gray">
      <div class="error-message text-danger text-sm mt-1 hidden">Vui lòng nhập link video</div>
    </div>
    <button onclick="validateAndDownload()" id="downloadBtn"
      class="btn bg-primary text-white border-none px-8 py-4 rounded-custom text-base font-semibold cursor-pointer transition-all duration-300 flex items-center justify-center mt-4 md:mt-0 md:ml-4 hover:bg-primary-dark hover:-translate-y-0.5 hover:shadow-lg active:translate-y-0">
      <i class="fas fa-download mr-2"></i> Tải xuống
    </button>
  </div>
</div>

<script>
  // Function to validate input and show error
  function validateInput() {
    const input = document.getElementById('videoUrl');
    const errorMessage = input.parentElement.querySelector('.error-message');
    
    if (!input.value.trim()) {
      input.classList.add('border-danger');
      input.classList.remove('border-gray-light');
      errorMessage.classList.remove('hidden');
      return false;
    } else {
      input.classList.remove('border-danger');
      input.classList.add('border-gray-light');
      errorMessage.classList.add('hidden');
      return true;
    }
  }

  // Function to handle download with validation
  function validateAndDownload() {
    if (validateInput()) {
      downloadVideo();
      // Clear input after starting download
      document.getElementById('videoUrl').value = '';
    }
  }

  // Add event listener for Enter key
  document.getElementById('videoUrl').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
      validateAndDownload();
    }
  });

  // Add event listener for input to clear error when typing
  document.getElementById('videoUrl').addEventListener('input', function() {
    if (this.value.trim()) {
      this.classList.remove('border-danger');
      this.classList.add('border-gray-light');
      this.parentElement.querySelector('.error-message').classList.add('hidden');
    }
  });
</script> 